<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><title>File、Blob与Base64相互转化</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/lib/highlight/styles/atom-one-dark.css"></head><body><header class="navbar navbar-fixed"><div class="navbar-nav"><div class="container"><a class="brand"></a><ul><li><a href="/">首页</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="/about/">关于</a></li></ul></div></div><div class="navbar-line"><div class="navbar-wrap"><div class="container current"><div class="cur"></div></div></div></div></header><div class="main"><div class="container post"><h1>File、Blob与Base64相互转化</h1><div class="meta"><time>2019-03-26</time><div class="tags"><a class="tag-link" href="/tags/base64/">base64 </a><a class="tag-link" href="/tags/File/">File </a><a class="tag-link" href="/tags/Blob/">Blob </a><a class="tag-link" href="/tags/FormData/">FormData </a></div></div><article id="markdown"><p>Web开发过程中，经常会用到文件上传的功能，有时候我们需要将文件转化成base64或者将base64转化成文件的形式来适配后端接口。</p>
<h2 id="File转Base64"><a href="#File转Base64" class="headerlink" title="File转Base64"></a>File转Base64</h2><p>通常使用FileReader读取文件的base64</p>
<pre><code class="js">  // 将文件转化成base64
  function fileToBase64(file, cb) {
    var fileReader = new FileReader();

    fileReader.onload = function (e) {
      cb(e.target.result)
    }
    fileReader.readAsDataURL(file);
  }

  // 使用
  document.querySelector(&#39;#file&#39;).addEventListener(&#39;change&#39;, function (e) {
    var file = e.target.files[0];
    fileToBase64(file, function (base64) {
      // 输出文件的base64信息
      console.log(base64);
    })
  })

</code></pre>
<h2 id="Base64转Blob"><a href="#Base64转Blob" class="headerlink" title="Base64转Blob"></a>Base64转Blob</h2><pre><code class="js">  // 将文件转化成Blob
  function base64ToBlob(dataurl) {
    var arr = dataurl.split(&#39;,&#39;);
    var mime = arr[0].match(/:(.*?);/)[1];
    var binaryString = atob(arr[1]);
    var n = binaryString.length;
    var buffer = new Uint8Array(n);
    while (n--) {
      buffer[n] = binaryString.charCodeAt(n);
    }
    return new Blob([buffer],{type: mime});
  }
</code></pre>
<h2 id="利用FormData上传文件"><a href="#利用FormData上传文件" class="headerlink" title="利用FormData上传文件"></a>利用FormData上传文件</h2><pre><code class="js">  var blob = new Blob([buffer],{type: mime})
  const data = new FormData();
  data.append(&#39;filename&#39;, blob);
  const opt = {
    headers: { &#39;Content-Type&#39;: &#39;multipart/form-data&#39; }
  };
  axios.post(url, data, opt);
</code></pre>
</article></div></div><footer id="footer"><div class="container"><div class="copy">Copyright &copy; 2025 Ray0324</div><nav><a href="/">首页</a><a href="/archives/">归档</a><a href="/tags/">标签</a><a href="/about/">关于</a></nav></div></footer><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/highlight/highlight.pack.js"></script><script src="/lib/push.js"></script><script src="/js/nano.js"></script></body></html>