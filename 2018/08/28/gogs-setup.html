<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><title>使用gogs配置Git服务</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/lib/highlight/styles/atom-one-dark.css"></head><body><header class="navbar navbar-fixed"><div class="navbar-nav"><div class="container"><a class="brand"></a><ul><li><a href="/">首页</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="/about/">关于</a></li></ul></div></div><div class="navbar-line"><div class="navbar-wrap"><div class="container current"><div class="cur"></div></div></div></div></header><div class="main"><div class="container post"><h1>使用gogs配置Git服务</h1><div class="meta"><time>2018-08-28</time><div class="tags"><a class="tag-link" href="/tags/Gogs/">Gogs </a></div></div><article id="markdown"><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ol>
<li><a href="https://github.com/git-for-windows/git/releases/" target="_blank" rel="noopener">git 客户端</a></li>
<li><a href="https://gogs.io/" target="_blank" rel="noopener">gogs 服务</a></li>
<li><a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener">mysql数据库</a></li>
</ol>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><h3 id="一、安装mysql"><a href="#一、安装mysql" class="headerlink" title="一、安装mysql"></a>一、安装mysql</h3><p>mysqlde的安装 网上有很多资料，这里就不再赘述了，需要注意的是，mysql安装完成后需要创建一个gogs数据库，<strong>注意设置数据库的字符集为utf8</strong></p>
<h3 id="二、安装gogs"><a href="#二、安装gogs" class="headerlink" title="二、安装gogs"></a>二、安装gogs</h3><p>安装前请先阅读一下官方的<a href="https://gogs.io/docs/installation" target="_blank" rel="noopener">安装说明</a></p>
<ol>
<li>下载gogs的windows版本,解压文件到 <code>D:/gogs</code></li>
<li>启动cmd 切换到gogs根目录下 执行<code>gogs web</code> </li>
<li>打开浏览器 访问<code>localhost:3000</code> 进行配置安装gogs</li>
<li>手工将<code>ssh-keygen</code>的目录加入到环境变量中 即<code>D:\Program Files\Git\usr\bin</code>，注意，设置不对则会影响到ssh的使用</li>
<li>注册一个用户，添加ssh公钥，测试能否从服务端使用ssh的形式拉代码到本地。</li>
</ol>
<h3 id="三、启用gogs服务"><a href="#三、启用gogs服务" class="headerlink" title="三、启用gogs服务"></a>三、启用gogs服务</h3><ol>
<li>安装 <a href="https://nssm.cc/download" target="_blank" rel="noopener">nssm</a> 将nssm的根目录添加到环境变量中</li>
<li>进入<code>D:\gogs\scripts\windows</code>下，编辑.bat文件，然后执行，即可启动守护进程。</li>
</ol>
<p>以下为windows下的bat文件，注意修改一下gogspath参数值</p>
<pre><code class="bat">@ECHO off
:: This script relies on nssm.exe to work.
:: Please, download it and make it available on the system path,
:: or copy it to the gogs path.
:: https://nssm.cc/download
:: This script itself should run in the gogs path, too.
:: In case of startup failure, please read carefully the log file.
:: Make sure Gogs work running manually with &quot;gogs web&quot; before running
:: this script.
:: And, please, read carefully the installation docs first:
:: https://gogs.io/docs/installation
:: To unistall the service, run &quot;nssm remove gogs&quot; and restart Windows.

:: Set the folder where you extracted Gogs. Omit the last slash.
SET gogspath=D:\gogs

nssm install gogs &quot;%gogspath%\gogs.exe&quot;
nssm set gogs AppParameters &quot;web&quot;
nssm set gogs Description &quot;A painless self-hosted Git service.&quot;
nssm set gogs DisplayName &quot;Gogs&quot;
nssm set gogs Start SERVICE_DELAYED_AUTO_START
nssm set gogs AppStdout &quot;%gogspath%\gogs.log&quot;
nssm start gogs
pause
</code></pre>
</article></div></div><footer id="footer"><div class="container"><div class="copy">Copyright &copy; 2022 Ray0324</div><nav><a href="/">首页</a><a href="/archives/">归档</a><a href="/tags/">标签</a><a href="/about/">关于</a></nav></div></footer><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/highlight/highlight.pack.js"></script><script src="/lib/push.js"></script><script src="/js/nano.js"></script></body></html>