<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><title>React-transition-group 使用注意点</title><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/lib/highlight/styles/atom-one-dark.css"></head><body><header class="navbar navbar-fixed"><div class="navbar-nav"><div class="container"><a class="brand"></a><ul><li><a href="/">首页</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="/about/">关于</a></li></ul></div></div><div class="navbar-line"><div class="navbar-wrap"><div class="container current"><div class="cur"></div></div></div></div></header><div class="main"><div class="container post"><h1>React-transition-group 使用注意点</h1><div class="meta"><time>2018-08-22</time><div class="tags"><a class="tag-link" href="/tags/React/">React </a><a class="tag-link" href="/tags/Animation/">Animation </a></div></div><article id="markdown"><h2 id="CSSTransition"><a href="#CSSTransition" class="headerlink" title="CSSTransition"></a>CSSTransition</h2><p><code>CSSTransition</code>组件是参考<code>ng-animate</code>进行设计的，在动画的关键位置为DOM添加节点，然后通过CSS3在这些关键位置添加关键帧动画以实现动画效果。</p>
<p>如：</p>
<pre><code class="jsx">  &lt;CSSTransition
    in={show}
    timeout={400}
    classNames=&quot;fade&quot;
    mountOnEnter
    unmountOnExit
  &gt;
    &lt;Modal content=&quot;hello&quot; /&gt;
  &lt;/CSSTransition&gt;
</code></pre>
<p>这里通过切换<code>in</code>的值来实现显示或隐藏<code>Modal</code>组件，上面的示例在切换<code>in</code>的值为<code>true</code>时，<code>Modal</code>组件先添加<code>fade-enter</code>，紧接着会添加<code>fade-enter-active</code>,400ms的<code>timeout</code>时间过去后，再添加<code>fade-enter-done</code>，当再次切换<code>in</code>的状态时候，也一样得到<code>fade-exit</code>,<code>fade-exit-active</code>,<code>fade-exit-active</code>,我们在这三个关键节点上添加动画关键帧来实现动画。</p>
<pre><code class="less">.fade{
  &amp;-enter{
    opacity: 0.01;
    transform: scale(1.185);
    &amp;-active{
      opacity: 1;
      transform: scale(1);
      transition: opacity 400ms ease-in, transform 400ms ease-in;
    }
  }
  &amp;-exit{
    opacity: 1;
    transform: scale(1);
    &amp;-active{
      opacity: 0.01;
      transform:scale(1.185);
      transition: opacity 400ms ease-out, transform 400ms ease-out;
    }
  }
}

</code></pre>
<p><strong>这里需要注意的是，淡出的时候在添加<code>unmountOnExit</code>来卸载组建而不是直接判断，下面的写法就会导致淡出的动画还未进行，组建就已经卸载了，这是经常可能碰到的一个坑。</strong></p>
<pre><code class="jsx">  &lt;CSSTransition
    in={show}
    timeout={400}
    classNames=&quot;fade&quot;
  &gt;
    { show &amp;&amp; &lt;Modal content=&quot;hello&quot; /&gt;}
  &lt;/CSSTransition&gt;
</code></pre>
<h3 id="典型使用示例"><a href="#典型使用示例" class="headerlink" title="典型使用示例"></a>典型使用示例</h3><p><a href="https://github.com/Ihatetomatoes/react-transition-group-classes" target="_blank" rel="noopener">https://github.com/Ihatetomatoes/react-transition-group-classes</a></p>
</article></div></div><footer id="footer"><div class="container"><div class="copy">Copyright &copy; 2021 Ray0324</div><nav><a href="/">首页</a><a href="/archives/">归档</a><a href="/tags/">标签</a><a href="/about/">关于</a></nav></div></footer><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/highlight/highlight.pack.js"></script><script src="/lib/push.js"></script><script src="/js/nano.js"></script></body></html>